  count  
---------
 1000000
(1 row)

                                                                  QUERY PLAN                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.45..8.47 rows=1 width=102) (actual time=0.050..0.051 rows=1 loops=1)
   InitPlan 1 (returns $0)
     ->  Limit  (cost=0.00..0.03 rows=1 width=37) (actual time=0.014..0.014 rows=1 loops=1)
           ->  Seq Scan on orders orders_1  (cost=0.00..26641.00 rows=1000000 width=37) (actual time=0.013..0.014 rows=1 loops=1)
   ->  Index Scan using idx_orders_customer_created_at on orders  (cost=0.42..8.44 rows=1 width=102) (actual time=0.050..0.050 rows=1 loops=1)
         Index Cond: (customer_id = $0)
 Planning Time: 0.136 ms
 Execution Time: 0.069 ms
(8 rows)

                                                                        QUERY PLAN                                                                         
-----------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=3121.17..3121.18 rows=1 width=8) (actual time=14.976..14.977 rows=1 loops=1)
   ->  Index Only Scan using idx_orders_paid_created_at on orders  (cost=0.43..2869.58 rows=100637 width=0) (actual time=0.046..11.764 rows=99650 loops=1)
         Index Cond: (created_at >= (now() - '30 days'::interval))
         Heap Fetches: 0
 Planning Time: 0.068 ms
 Execution Time: 14.989 ms
(6 rows)

                                                                  QUERY PLAN                                                                  
----------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=18174.89..18174.90 rows=1 width=32) (actual time=95.773..95.774 rows=1 loops=1)
   ->  Bitmap Heap Scan on orders  (cost=742.93..18076.02 rows=39548 width=6) (actual time=6.606..90.997 rows=38512 loops=1)
         Recheck Cond: (created_at >= (now() - '7 days'::interval))
         Heap Blocks: exact=15051
         ->  Bitmap Index Scan on idx_orders_created_at  (cost=0.00..733.04 rows=39548 width=0) (actual time=4.706..4.706 rows=38512 loops=1)
               Index Cond: (created_at >= (now() - '7 days'::interval))
 Planning Time: 0.131 ms
 Execution Time: 95.871 ms
(8 rows)

